package main

import "net"
import "fmt"
import "bufio"
import "os"
import "strings"

func main() {

  fmt.Println(strings.Compare("\n", "hello\n"))

  // connect to this socket
  //conn, _ := net.Dial("tcp", "10.201.40.121:8081")
  conn, _ := net.Dial("tcp", "127.0.0.1:8081")

  for i := 0; i < 1; i+=0 { 
    // read in input from stdin
    reader := bufio.NewReader(os.Stdin)
    //fmt.Print("Text to send: ")
    text, _ := reader.ReadString('\n')
    if(strings.Compare(text, "quit\n") == 0) {
      i++
    }
    // send to socket
    fmt.Fprintf(conn, text + "\n")
    // listen for reply
    var message string = ""

    
    //var i int = 0

    for {
      message, _ = bufio.NewReader(conn).ReadString('\n')
      fmt.Print(message)

      if(strings.Compare(message, "stop\n") == 0) {
        break
      } 
    }
    fmt.Println("i am now done")
  }
}

