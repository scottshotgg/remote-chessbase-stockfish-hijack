# add the bmi2 in for Windows


### Make the Windows release ###
echo "Making the Windows release"
make clean
make build ARCH=x86-64 -j $1 \
	EXE=hijacked_stockfish.exe \
	COMP=mingw \
	CXXFLAGS+="-lboost_system-mt -lboost_thread-mt -std=c++14 -Ofast -march=native -static -lwsock32 -lws2_32 -D WIN32" \
	LDFLAGS+=" -lboost_system-mt -lboost_thread-mt -std=c++14 -Ofast -march=native -static -lwsock32 -lws2_32 -D WIN32" 


### Make the Linux release ###
echo "Making the Linux release"
make clean
make build ARCH=x86-64-bmi2 -j $1 \
	EXE=hijacked_stockfish \
	COMP=clang \
	CXXFLAGS+="-std=c++14 -Ofast -pthread -march=native" \
	LDFLAGS+=" -std=c++14 -Ofast -lpthread -lboost_system -lboost_thread -march=native"

cp -r hijacked_stockfish* ../../executables/ 
